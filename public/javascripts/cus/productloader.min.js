/*! taobaofocus 2014-06-04 */

!function(a,b){"use strict";return a.initProductPage=function(){a.initProductCarousel(),a.initShoppingCart()},a.initShoppingCart=function(a,c,d,e){function f(a,c){if("number"==typeof a){var d=b("span.total-money"),e=parseFloat(d.text())?parseFloat(d.text()):0;e+=a,d.text(e)}if("number"==typeof c){var f=b("span.total-quantity"),g=parseInt(f.text())?parseInt(f.text()):0;g+=c,f.text(g)}}function g(a){for(var c=p.children("li"),d=c.length;d--;){var e=b(c[d]);if(e.data("pid")==a)return e}}function h(a){var c=b('<li class="media"></li>');c.attr("data-pid",a.pid),c.attr("alt",t);var d=b('<a class="pull-left"></a>');d.attr("href","/tpi/product/details/"+a.cid+"/"+a.pid);var e=b('<img class="media-object img-thumbnail" style="width: 150px; height:150px"/>');e.attr("src",a.img_url),d.append(e),c.append(d);var f=parseInt(a.quantity)?a.quantity:1,g=b('<div class="media-body"></div>');return b("<h5></h5>").text(a.p_name).appendTo(g),b('<span class="bright-point"></span>').text(a.price).append("<span> x </span>").append('<span class="quantity bright-point">'+f+"</span>").appendTo(g),g.appendTo(c),c}var i=b.cookie("shoppingcart"),j="string"==typeof a?a:"#btn-add-to-shopping-cart",k="string"==typeof c?c:"#ipt-data-container",l=(b(document.body),b(j)),m=(b(k),b("input[name='_csrf']")),n="string"==typeof d?d:"#btn-shopping-cart",o="string"==typeof e?e:"#shortcart-list",p=(b(n),b(o)),q=l.data("pid"),r=l.data("cid"),s=l.data("img-url"),t=l.data("pname"),u=l.data("price");if(i){b("div#shopping-summary").removeClass("hidden").addClass("show");try{i=i.substring(i.indexOf("{"),i.lastIndexOf("}")+1);var v=b.parseJSON(i),w=0,x=0;for(var y in v){var z=v[y],A={pid:z.productId,cid:z.cid,price:parseFloat(z.price),quantity:parseInt(z.quality),img_url:z.img_url,p_name:z.name};x+=A.quantity,w+=A.price*A.quantity;var B=h(A);B&&p.append(B)}f(w,x)}catch(C){}}else b("div#go-shopping").removeClass("hidden").addClass("show");l.popover({html:!0,placement:"top",trigger:"manual"}),l.on("shown.bs.popover",function(){b("#close-add-result").click(function(){l.popover("hide")})}),l.click(function(){l.button("loading"),b.ajax({url:"/cus/shoppingcart/add/"+r+"/"+q,type:"POST",data:{name:t,price:u,img_url:s,_csrf:m.val()},beforeSend:function(){},complete:function(){l.button("reset")},success:function(a,c){if("success"===c){b("div#shopping-summary").removeClass("hide"),b("div#go-shopping").addClass("hide"),l.popover("show");var d=g(q);if(d){var e=d.find("span.quantity"),i=parseInt(e.text());e.text(i+1),f(parseFloat(u),1)}else d=h({pid:q,cid:r,img_url:s,p_name:t,price:u}),d&&p.append(d)}},error:function(){}})})},a.initProductCarousel=function(a,c){var d="string"==typeof a?a:"#product-carousel",e="string"==typeof c?c:"#product-img",f=(b(document.body),b(d)),g=b(e);if(f){var h=f.find("a.thumbnail");h.each(function(){var a=b(this),c=a.children("img");a.mouseenter(function(){g.attr("src",c.attr("src"))})})}},window.focusTaobao||(window.focusTaobao=a),a}(window.focusTaobao||{},window.jQuery),!function(a,b){"use strict";return a.initProductPage=function(){a.initProductCarousel(),a.initShoppingCart()},a.initShoppingCart=function(a,c,d,e){function f(a,c){if("number"==typeof a){var d=b("span.total-money"),e=parseFloat(d.text())?parseFloat(d.text()):0;e+=a,d.text(e)}if("number"==typeof c){var f=b("span.total-quantity"),g=parseInt(f.text())?parseInt(f.text()):0;g+=c,f.text(g)}}function g(a){for(var c=p.children("li"),d=c.length;d--;){var e=b(c[d]);if(e.data("pid")==a)return e}}function h(a){var c=b('<li class="media"></li>');c.attr("data-pid",a.pid),c.attr("alt",t);var d=b('<a class="pull-left"></a>');d.attr("href","/tpi/product/details/"+a.cid+"/"+a.pid);var e=b('<img class="media-object img-thumbnail" style="width: 150px; height:150px"/>');e.attr("src",a.img_url),d.append(e),c.append(d);var f=parseInt(a.quantity)?a.quantity:1,g=b('<div class="media-body"></div>');return b("<h5></h5>").text(a.p_name).appendTo(g),b('<span class="bright-point"></span>').text(a.price).append("<span> x </span>").append('<span class="quantity bright-point">'+f+"</span>").appendTo(g),g.appendTo(c),c}var i=b.cookie("shoppingcart"),j="string"==typeof a?a:"#btn-add-to-shopping-cart",k="string"==typeof c?c:"#ipt-data-container",l=(b(document.body),b(j)),m=(b(k),b("input[name='_csrf']")),n="string"==typeof d?d:"#btn-shopping-cart",o="string"==typeof e?e:"#shortcart-list",p=(b(n),b(o)),q=l.data("pid"),r=l.data("cid"),s=l.data("img-url"),t=l.data("pname"),u=l.data("price");if(i){b("div#shopping-summary").removeClass("hidden").addClass("show");try{i=i.substring(i.indexOf("{"),i.lastIndexOf("}")+1);var v=b.parseJSON(i),w=0,x=0;for(var y in v){var z=v[y],A={pid:z.productId,cid:z.cid,price:parseFloat(z.price),quantity:parseInt(z.quality),img_url:z.img_url,p_name:z.name};x+=A.quantity,w+=A.price*A.quantity;var B=h(A);B&&p.append(B)}f(w,x)}catch(C){}}else b("div#go-shopping").removeClass("hidden").addClass("show");l.popover({html:!0,placement:"top",trigger:"manual"}),l.on("shown.bs.popover",function(){b("#close-add-result").click(function(){l.popover("hide")})}),l.click(function(){l.button("loading"),b.ajax({url:"/cus/shoppingcart/add/"+r+"/"+q,type:"POST",data:{name:t,price:u,img_url:s,_csrf:m.val()},beforeSend:function(){},complete:function(){l.button("reset")},success:function(a,c){if("success"===c){b("div#shopping-summary").removeClass("hide"),b("div#go-shopping").addClass("hide"),l.popover("show");var d=g(q);if(d){var e=d.find("span.quantity"),i=parseInt(e.text());e.text(i+1),f(parseFloat(u),1)}else d=h({pid:q,cid:r,img_url:s,p_name:t,price:u}),d&&p.append(d)}},error:function(){}})})},a.initProductCarousel=function(a,c){var d="string"==typeof a?a:"#product-carousel",e="string"==typeof c?c:"#product-img",f=(b(document.body),b(d)),g=b(e);if(f){var h=f.find("a.thumbnail");h.each(function(){var a=b(this),c=a.children("img");a.mouseenter(function(){g.attr("src",c.attr("src"))})})}},window.focusTaobao||(window.focusTaobao=a),a}(window.focusTaobao||{},window.jQuery),!function(a,b){"use strict";return a.initProductPage=function(){a.initProductCarousel(),a.initShoppingCart()},a.initShoppingCart=function(a,c,d,e){function f(a,c){if("number"==typeof a){var d=b("span.total-money"),e=parseFloat(d.text())?parseFloat(d.text()):0;e+=a,d.text(e)}if("number"==typeof c){var f=b("span.total-quantity"),g=parseInt(f.text())?parseInt(f.text()):0;g+=c,f.text(g)}}function g(a){for(var c=p.children("li"),d=c.length;d--;){var e=b(c[d]);if(e.data("pid")==a)return e}}function h(a){var c=b('<li class="media"></li>');c.attr("data-pid",a.pid),c.attr("alt",t);var d=b('<a class="pull-left"></a>');d.attr("href","/tpi/product/details/"+a.cid+"/"+a.pid);var e=b('<img class="media-object img-thumbnail" style="width: 150px; height:150px"/>');e.attr("src",a.img_url),d.append(e),c.append(d);var f=parseInt(a.quantity)?a.quantity:1,g=b('<div class="media-body"></div>');return b("<h5></h5>").text(a.p_name).appendTo(g),b('<span class="bright-point"></span>').text(a.price).append("<span> x </span>").append('<span class="quantity bright-point">'+f+"</span>").appendTo(g),g.appendTo(c),c}var i=b.cookie("shoppingcart"),j="string"==typeof a?a:"#btn-add-to-shopping-cart",k="string"==typeof c?c:"#ipt-data-container",l=(b(document.body),b(j)),m=(b(k),b("input[name='_csrf']")),n="string"==typeof d?d:"#btn-shopping-cart",o="string"==typeof e?e:"#shortcart-list",p=(b(n),b(o)),q=l.data("pid"),r=l.data("cid"),s=l.data("img-url"),t=l.data("pname"),u=l.data("price");if(i){b("div#shopping-summary").removeClass("hidden").addClass("show");try{i=i.substring(i.indexOf("{"),i.lastIndexOf("}")+1);var v=b.parseJSON(i),w=0,x=0;for(var y in v){var z=v[y],A={pid:z.productId,cid:z.cid,price:parseFloat(z.price),quantity:parseInt(z.quality),img_url:z.img_url,p_name:z.name};x+=A.quantity,w+=A.price*A.quantity;var B=h(A);B&&p.append(B)}f(w,x)}catch(C){}}else b("div#go-shopping").removeClass("hidden").addClass("show");l.popover({html:!0,placement:"top",trigger:"manual"}),l.on("shown.bs.popover",function(){b("#close-add-result").click(function(){l.popover("hide")})}),l.click(function(){l.button("loading"),b.ajax({url:"/cus/shoppingcart/add/"+r+"/"+q,type:"POST",data:{name:t,price:u,img_url:s,_csrf:m.val()},beforeSend:function(){},complete:function(){l.button("reset")},success:function(a,c){if("success"===c){b("div#shopping-summary").removeClass("hide"),b("div#go-shopping").addClass("hide"),l.popover("show");var d=g(q);if(d){var e=d.find("span.quantity"),i=parseInt(e.text());e.text(i+1),f(parseFloat(u),1)}else d=h({pid:q,cid:r,img_url:s,p_name:t,price:u}),d&&p.append(d)}},error:function(){}})})},a.initProductCarousel=function(a,c){var d="string"==typeof a?a:"#product-carousel",e="string"==typeof c?c:"#product-img",f=(b(document.body),b(d)),g=b(e);if(f){var h=f.find("a.thumbnail");h.each(function(){var a=b(this),c=a.children("img");a.mouseenter(function(){g.attr("src",c.attr("src"))})})}},window.focusTaobao||(window.focusTaobao=a),a}(window.focusTaobao||{},window.jQuery);
//# sourceMappingURL=productloader.min.map