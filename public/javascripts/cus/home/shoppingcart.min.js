/*! taobaofocus 2014-06-04 */

!function(a,b){var c=b("#shortcart-list"),d=function(){var a=b("span.total-money"),c=parseFloat(a.text())||0;return{price:c,holder:a}},e=function(a){for(var d=c.children("li"),e=d.length;e--;){var f=b(d[e]);if(f.data("skuid")===a)return f}},f=function(){var a=b("span.total-quantity"),c=parseInt(a.text())||0;return{quantity:c,holder:a}},g=function(a,b){if("number"==typeof a){var c=d(),e=c.holder,g=c.price;a=(g+a).toFixed(2),e.text(a)}if("number"==typeof b){var h=f(),i=h.holder,j=h.quantity;b=j+b,i.text(b)}},h=function(a){var c=b('<li class="media"></li>');for(var d in a){var e=a[d];c.attr("data-"+d,e)}var f=b('<a class="pull-left"></a>');f.attr("href","/items/d/"+a.numiid);var g=b('<img class="media-object img-thumbnail" style="width: 150px; height:150px"/>');g.attr("src",a.img),f.append(g),c.append(f);var h=parseInt(a.quantity)||1,i=b('<div class="media-body"></div>');if(b("<h5></h5>").text(a.title).appendTo(i),b('<span class="bright-point"></span>').text(a.price).append("<span> x </span>").append('<span class="quantity bright-point">'+h+"</span>").appendTo(i),a.sel_prop.length)for(var j=0,k=a.sel_prop.length;k>j;j++){var l=a.sel_prop[j].alias||a.sel_prop[j].name;b('<span class="cart-item-prop"></span>').text(l).appendTo(i)}return i.appendTo(c),c},i=function(){b.ajax({url:"/customer/get-shoppingcart",dataType:"json",type:"GET",success:function(a,d){if("success"===d&&a.length){b("div#shopping-summary").removeClass("hidden").addClass("show");try{var e=0,f=0;b(a).each(function(){var a=this,b=parseInt(a.quantity)||1,d=parseFloat(a.price)||0;f+=b,e+=parseFloat(b*d);var g=h(a);g&&c.append(g)}),g(e,f)}catch(i){alert(i)}}else b("div#go-shopping").removeClass("hidden").addClass("show")},beforeSend:function(){},error:function(){},complete:function(){}})};return a.shoppingcart={addItem:function(a){var b=a.skuid,d=parseInt(a.quantity)||0,f=parseFloat(a.price)||0,i=e(b);if(i){var j=i.find("span.quantity"),k=parseInt(j.text());j.text(k+d),g(f*d,d)}else i=h(a),i&&(c.append(i),g(f*d,d))},delItem:function(){}},b(document).ready(function(){i()}),window.focusTaobao=window.focusTaobao||a,a}(window.focusTaobao||{},window.jQuery),!function(a,b){var c=b("#shortcart-list"),d=function(){var a=b("span.total-money"),c=parseFloat(a.text())||0;return{price:c,holder:a}},e=function(a){for(var d=c.children("li"),e=d.length;e--;){var f=b(d[e]);if(f.data("skuid")===a)return f}},f=function(){var a=b("span.total-quantity"),c=parseInt(a.text())||0;return{quantity:c,holder:a}},g=function(a,b){if("number"==typeof a){var c=d(),e=c.holder,g=c.price;a=(g+a).toFixed(2),e.text(a)}if("number"==typeof b){var h=f(),i=h.holder,j=h.quantity;b=j+b,i.text(b)}},h=function(a){var c=b('<li class="media"></li>');for(var d in a){var e=a[d];c.attr("data-"+d,e)}var f=b('<a class="pull-left"></a>');f.attr("href","/items/d/"+a.numiid);var g=b('<img class="media-object img-thumbnail" style="width: 150px; height:150px"/>');g.attr("src",a.img),f.append(g),c.append(f);var h=parseInt(a.quantity)||1,i=b('<div class="media-body"></div>');if(b("<h5></h5>").text(a.title).appendTo(i),b('<span class="bright-point"></span>').text(a.price).append("<span> x </span>").append('<span class="quantity bright-point">'+h+"</span>").appendTo(i),a.sel_prop.length)for(var j=0,k=a.sel_prop.length;k>j;j++){var l=a.sel_prop[j].alias||a.sel_prop[j].name;b('<span class="cart-item-prop"></span>').text(l).appendTo(i)}return i.appendTo(c),c},i=function(){b.ajax({url:"/customer/get-shoppingcart",dataType:"json",type:"GET",success:function(a,d){if("success"===d&&a.length){b("div#shopping-summary").removeClass("hidden").addClass("show");try{var e=0,f=0;b(a).each(function(){var a=this,b=parseInt(a.quantity)||1,d=parseFloat(a.price)||0;f+=b,e+=parseFloat(b*d);var g=h(a);g&&c.append(g)}),g(e,f)}catch(i){alert(i)}}else b("div#go-shopping").removeClass("hidden").addClass("show")},beforeSend:function(){},error:function(){},complete:function(){}})};return a.shoppingcart={addItem:function(a){var b=a.skuid,d=parseInt(a.quantity)||0,f=parseFloat(a.price)||0,i=e(b);if(i){var j=i.find("span.quantity"),k=parseInt(j.text());j.text(k+d),g(f*d,d)}else i=h(a),i&&(c.append(i),g(f*d,d))},delItem:function(){}},b(document).ready(function(){i()}),window.focusTaobao=window.focusTaobao||a,a}(window.focusTaobao||{},window.jQuery);
//# sourceMappingURL=shoppingcart.min.map