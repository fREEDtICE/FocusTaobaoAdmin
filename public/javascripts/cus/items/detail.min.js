/*! taobaofocus 2014-06-04 */

!function(a,b){"use strict";a.item=a.item||{},a.item.detail=a.item.detail||{};var c=a.item.detail,d=function(a,c){var d="string"==typeof a?a:"#item-carousel",e="string"==typeof c?c:"#item-img",f=(b(document.body),b(d)),g=b(e);if(f){var h=f.find("a.thumbnail");h.each(function(){var a=b(this),c=a.children("img");a.mouseenter(function(){g.attr("src",c.data("url"))})})}},e=function(d){function e(){var a=g.data(),b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return delete b["bs.button"],delete b["bs.popover"],delete b.content,delete b.html,delete b.resetText,delete b.loadingtext,b}{var f="string"==typeof d?d:"#btn-add-to-shopping-cart",g=b(f),h=g.data("num_iid");g.data("price")}g.on("shown.bs.popover",function(){b("#close-add-result").click(function(){g.popover("hide")})}),g.popover({html:!0,placement:"top",trigger:"manual"}),g.click(function(){var d={iteminfo:e(),_csrf:b("input[name='_csrf']").val(),sku:c.sel_sku,sel_prop:c.sel_prop,q:parseInt(b("#quantity-input").val()),i:c.sel_img,p:parseFloat(b("#item-price").text())};d=JSON.parse(JSON.stringify(d)),b.ajax({url:"/items/s/a/"+h+"/"+c.sel_sku.id,type:"POST",data:d,beforeSend:function(){},complete:function(){g.button("reset")},success:function(c,d){"success"===d&&(b("div#shopping-summary").removeClass("hidden"),b("div#go-shopping").addClass("hidden"),g.popover("show"),a.shoppingcart.addItem(c)),g.button("reset")},error:function(){g.button("reset")}})})},f=function(){var a=b("ul.prop-list"),d=a.length,e=function(a){if(!a instanceof Array){var b=a;a=[b]}var d=0;for(var e in c.skus){for(var f=!0,g=c.skus[e],h=0,i=a.length;i>h;h++)if(g.props.indexOf(a[h])<0){f=!1;break}f&&(d+=g.quantity)}return d},f=function(a){if(!a instanceof Array){var b=a;a=[b]}for(var d in c.skus)for(var e=c.skus[d],f=0,g=a.length;g>f&&!(e.props.indexOf(a[f])<0);f++)if(f===g-1)return e};c.sel_prop||(c.sel_prop=new Array(d));var g=c.sel_prop;a.each(function(a){var h=b(this),i=h.find("li"),j=h.data("cid"),k=h.data("cname"),l=b("img#item-img");i.each(function(){var h=b(this),i=(h.children("a"),h.data("pid")),m=h.data("pname"),n=h.data("alias");h.click(function(){var o=h.find("img");if(o.length){var p=o.data("img");l.attr("src",p),c.sel_img=p}g[a]={cid:j,cname:k,id:j+":"+i,name:m,alias:n};for(var q=new Array,r=0,s=c.sel_prop.length;s>r;r++)g[r]&&q.push(g[r].id);var t=0,u=b("#item-price"),v=u.text(),w=b("#btn-add-to-shopping-cart");if(q.length===d){var x=f(q);x&&(t=x.quantity,c.sel_sku=x,v=x.prom_price||x.price)}else t=e(q);b("#quantity-num").text(t),u.text(v),t?w.removeClass("disabled"):w.addClass("disabled")})})})},g=function(){b(".spinner .btn:first-of-type").on("click",function(){b(".spinner input").val(parseInt(b(".spinner input").val(),10)+1)}),b(".spinner .btn:last-of-type").on("click",function(){var a=b(".spinner input"),c=parseInt(a.val(),10)-1||1;b(".spinner input").val(c)})},h=function(){c.skus={};var a=b("input[name='sku']");a.each(function(){var a=b(this),d=a.data("id"),e=a.data("price"),f=a.data("quantity"),g=a.val();c.skus[d]={id:d,price:e,quantity:f,props:g},a.remove()});var d=b("#item_promotion");if(d.length>0){try{var e=b.parseJSON(d.val());c.promotion={name:e.name,item_promo_price:e.item_promo_price,end_time:e.end_time,start_time:e.start_time};for(var f=e.sku_id_list.string,g=e.sku_price_list.price,h=0,i=f.length;i>h;h++){var j=f[h];if(j in c.skus){var k=c.skus[j];k.prom_price=g[h]}}}catch(l){}d.remove()}};b(document).ready(function(){h(),d(),e(),f(),g()}),window.focusTaobao=a}(window.focusTaobao||{},window.jQuery),!function(a,b){"use strict";a.item=a.item||{},a.item.detail=a.item.detail||{};var c=a.item.detail,d=function(a,c){var d="string"==typeof a?a:"#item-carousel",e="string"==typeof c?c:"#item-img",f=(b(document.body),b(d)),g=b(e);if(f){var h=f.find("a.thumbnail");h.each(function(){var a=b(this),c=a.children("img");a.mouseenter(function(){g.attr("src",c.data("url"))})})}},e=function(d){function e(){var a=g.data(),b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return delete b["bs.button"],delete b["bs.popover"],delete b.content,delete b.html,delete b.resetText,delete b.loadingtext,b}var f="string"==typeof d?d:"#btn-add-to-shopping-cart",g=b(f),h=g.data("num_iid");g.data("price"),g.on("shown.bs.popover",function(){b("#close-add-result").click(function(){g.popover("hide")})}),g.popover({html:!0,placement:"top",trigger:"manual"}),g.click(function(){var d={iteminfo:e(),_csrf:b("input[name='_csrf']").val(),sku:c.sel_sku,sel_prop:c.sel_prop,q:parseInt(b("#quantity-input").val()),i:c.sel_img,p:parseFloat(b("#item-price").text())};d=JSON.parse(JSON.stringify(d)),b.ajax({url:"/items/s/a/"+h+"/"+c.sel_sku.id,type:"POST",data:d,beforeSend:function(){},complete:function(){g.button("reset")},success:function(c,d){"success"===d&&(b("div#shopping-summary").removeClass("hidden"),b("div#go-shopping").addClass("hidden"),g.popover("show"),a.shoppingcart.addItem(c)),g.button("reset")},error:function(){g.button("reset")}})})},f=function(){var a=b("ul.prop-list"),d=a.length,e=function(a){if(!a instanceof Array){var b=a;a=[b]}var d=0;for(var e in c.skus){for(var f=!0,g=c.skus[e],h=0,i=a.length;i>h;h++)if(g.props.indexOf(a[h])<0){f=!1;break}f&&(d+=g.quantity)}return d},f=function(a){if(!a instanceof Array){var b=a;a=[b]}for(var d in c.skus)for(var e=c.skus[d],f=0,g=a.length;g>f&&!(e.props.indexOf(a[f])<0);f++)if(f===g-1)return e};c.sel_prop||(c.sel_prop=new Array(d));var g=c.sel_prop;a.each(function(a){var h=b(this),i=h.find("li"),j=h.data("cid"),k=h.data("cname"),l=b("img#item-img");i.each(function(){var h=b(this),i=(h.children("a"),h.data("pid")),m=h.data("pname"),n=h.data("alias");h.click(function(){var o=h.find("img");if(o.length){var p=o.data("img");l.attr("src",p),c.sel_img=p}g[a]={cid:j,cname:k,id:j+":"+i,name:m,alias:n};for(var q=new Array,r=0,s=c.sel_prop.length;s>r;r++)g[r]&&q.push(g[r].id);var t=0,u=b("#item-price"),v=u.text(),w=b("#btn-add-to-shopping-cart");if(q.length===d){var x=f(q);x&&(t=x.quantity,c.sel_sku=x,v=x.prom_price||x.price)}else t=e(q);b("#quantity-num").text(t),u.text(v),t?w.removeClass("disabled"):w.addClass("disabled")})})})},g=function(){b(".spinner .btn:first-of-type").on("click",function(){b(".spinner input").val(parseInt(b(".spinner input").val(),10)+1)}),b(".spinner .btn:last-of-type").on("click",function(){var a=b(".spinner input"),c=parseInt(a.val(),10)-1||1;b(".spinner input").val(c)})},h=function(){c.skus={};var a=b("input[name='sku']");a.each(function(){var a=b(this),d=a.data("id"),e=a.data("price"),f=a.data("quantity"),g=a.val();c.skus[d]={id:d,price:e,quantity:f,props:g},a.remove()});var d=b("#item_promotion");if(d.length>0){try{var e=b.parseJSON(d.val());c.promotion={name:e.name,item_promo_price:e.item_promo_price,end_time:e.end_time,start_time:e.start_time};for(var f=e.sku_id_list.string,g=e.sku_price_list.price,h=0,i=f.length;i>h;h++){var j=f[h];if(j in c.skus){var k=c.skus[j];k.prom_price=g[h]}}}catch(l){}d.remove()}};b(document).ready(function(){h(),d(),e(),f(),g()}),window.focusTaobao=a}(window.focusTaobao||{},window.jQuery);
//# sourceMappingURL=detail.min.map