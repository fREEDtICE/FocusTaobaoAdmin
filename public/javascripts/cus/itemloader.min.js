/*! taobaofocus 2014-06-04 */

!function(a,b){"use strict";return a.initItemPage=function(){a.initItemCarousel(),a.initShoppingCart(),a.initItemProp()},a.initItemProp=function(){var a=b("ul#prop-list"),c=a.find("li"),d=b("span#item-quantity"),e=b("span#item-price"),f=b("img#item-img");c.each(function(){var a=b(this);a.click(function(){d.text(a.data("sku-quantity")),e.text(a.data("sku-price"));var b=a.find("img").attr("src");f.attr("src",b)})})},a.initShoppingCart=function(a,c,d,e){function f(a,c){if("number"==typeof a){var d=b("span.total-money"),e=parseFloat(d.text())?parseFloat(d.text()):0;e+=a,d.text(e)}if("number"==typeof c){var f=b("span.total-quantity"),g=parseInt(f.text())?parseInt(f.text()):0;g+=c,f.text(g)}}function g(a){for(var c=q.children("li"),d=c.length;d--;){var e=b(c[d]);if(e.data("num_iid")===a)return e}}function h(){var a=m.data(),b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return delete b["bs.button"],delete b["bs.popover"],delete b.content,delete b.html,delete b.resetText,delete b.loadingtext,b._csrf=n.val(),b}function i(a){var c=b('<li class="media"></li>');for(var d in a){var e=a[d];c.attr("data-"+d,e)}var f=b('<a class="pull-left"></a>');f.attr("href","/tpi/item/details/"+a.num_iid);var g=b('<img class="media-object img-thumbnail" style="width: 150px; height:150px"/>');g.attr("src",a.img_url),f.append(g),c.append(f);var h=parseInt(a.quantity)?a.quantity:1,i=b('<div class="media-body"></div>');return b("<h5></h5>").text(a.title).appendTo(i),b('<span class="bright-point"></span>').text(a.price).append("<span> x </span>").append('<span class="quantity bright-point">'+h+"</span>").appendTo(i),i.appendTo(c),c}var j=b.cookie("shoppingcart"),k="string"==typeof a?a:"#btn-add-to-shopping-cart",l="string"==typeof c?c:"#ipt-data-container",m=(b(document.body),b(k)),n=(b(l),b("input[name='_csrf']")),o="string"==typeof d?d:"#btn-shopping-cart",p="string"==typeof e?e:"#shortcart-list",q=(b(o),b(p)),r=m.data("num_iid"),s=m.data("price");if(j){b("div#shopping-summary").removeClass("hidden").addClass("show");try{j=j.substring(j.indexOf("{"),j.lastIndexOf("}")+1),j.replace("'",'"');var t=b.parseJSON(j),u=0,v=0;for(var w in t){var x=t[w];v+=parseInt(x.quantity),u+=parseFloat(x.price)*parseInt(x.quantity);var y=i(x);y&&q.append(y)}f(u,v)}catch(z){}}else b("div#go-shopping").removeClass("hidden").addClass("show");m.popover({html:!0,placement:"top",trigger:"manual"}),m.on("shown.bs.popover",function(){b("#close-add-result").click(function(){m.popover("hide")})}),m.click(function(){m.button("loading"),b.ajax({url:"/cus/shoppingcart/add/item/"+r,type:"POST",data:h(),beforeSend:function(){},complete:function(){m.button("reset")},success:function(a,c){if("success"===c){b("div#shopping-summary").removeClass("hidden"),b("div#go-shopping").addClass("hidden"),m.popover("show");var d=g(r);if(d){var e=d.find("span.quantity"),j=parseInt(e.text());e.text(j+1),f(parseFloat(s),1)}else d=i(h()),d&&q.append(d)}},error:function(){}})})},a.initItemCarousel=function(a,c){var d="string"==typeof a?a:"#item-carousel",e="string"==typeof c?c:"#item-img",f=(b(document.body),b(d)),g=b(e);if(f){var h=f.find("a.thumbnail");h.each(function(){var a=b(this),c=a.children("img");a.mouseenter(function(){g.attr("src",c.attr("src"))})})}},window.focusTaobao||(window.focusTaobao=a),a}(window.focusTaobao||{},window.jQuery),!function(a,b){"use strict";return a.initItemPage=function(){a.initItemCarousel(),a.initShoppingCart(),a.initItemProp()},a.initItemProp=function(){var a=b("ul#prop-list"),c=a.find("li"),d=b("span#item-quantity"),e=b("span#item-price"),f=b("img#item-img");c.each(function(){var a=b(this);a.click(function(){d.text(a.data("sku-quantity")),e.text(a.data("sku-price"));var b=a.find("img").attr("src");f.attr("src",b)})})},a.initShoppingCart=function(a,c,d,e){function f(a,c){if("number"==typeof a){var d=b("span.total-money"),e=parseFloat(d.text())?parseFloat(d.text()):0;e+=a,d.text(e)}if("number"==typeof c){var f=b("span.total-quantity"),g=parseInt(f.text())?parseInt(f.text()):0;g+=c,f.text(g)}}function g(a){for(var c=q.children("li"),d=c.length;d--;){var e=b(c[d]);if(e.data("num_iid")===a)return e}}function h(){var a=m.data(),b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return delete b["bs.button"],delete b["bs.popover"],delete b.content,delete b.html,delete b.resetText,delete b.loadingtext,b._csrf=n.val(),b}function i(a){var c=b('<li class="media"></li>');for(var d in a){var e=a[d];c.attr("data-"+d,e)}var f=b('<a class="pull-left"></a>');f.attr("href","/tpi/item/details/"+a.num_iid);var g=b('<img class="media-object img-thumbnail" style="width: 150px; height:150px"/>');g.attr("src",a.img_url),f.append(g),c.append(f);var h=parseInt(a.quantity)?a.quantity:1,i=b('<div class="media-body"></div>');return b("<h5></h5>").text(a.title).appendTo(i),b('<span class="bright-point"></span>').text(a.price).append("<span> x </span>").append('<span class="quantity bright-point">'+h+"</span>").appendTo(i),i.appendTo(c),c}var j=b.cookie("shoppingcart"),k="string"==typeof a?a:"#btn-add-to-shopping-cart",l="string"==typeof c?c:"#ipt-data-container",m=(b(document.body),b(k)),n=(b(l),b("input[name='_csrf']")),o="string"==typeof d?d:"#btn-shopping-cart",p="string"==typeof e?e:"#shortcart-list",q=(b(o),b(p)),r=m.data("num_iid"),s=m.data("price");if(j){b("div#shopping-summary").removeClass("hidden").addClass("show");try{j=j.substring(j.indexOf("{"),j.lastIndexOf("}")+1),j.replace("'",'"');var t=b.parseJSON(j),u=0,v=0;for(var w in t){var x=t[w];v+=parseInt(x.quantity),u+=parseFloat(x.price)*parseInt(x.quantity);var y=i(x);y&&q.append(y)}f(u,v)}catch(z){}}else b("div#go-shopping").removeClass("hidden").addClass("show");m.popover({html:!0,placement:"top",trigger:"manual"}),m.on("shown.bs.popover",function(){b("#close-add-result").click(function(){m.popover("hide")})}),m.click(function(){m.button("loading"),b.ajax({url:"/cus/shoppingcart/add/item/"+r,type:"POST",data:h(),beforeSend:function(){},complete:function(){m.button("reset")},success:function(a,c){if("success"===c){b("div#shopping-summary").removeClass("hidden"),b("div#go-shopping").addClass("hidden"),m.popover("show");var d=g(r);if(d){var e=d.find("span.quantity"),j=parseInt(e.text());e.text(j+1),f(parseFloat(s),1)}else d=i(h()),d&&q.append(d)}},error:function(){}})})},a.initItemCarousel=function(a,c){var d="string"==typeof a?a:"#item-carousel",e="string"==typeof c?c:"#item-img",f=(b(document.body),b(d)),g=b(e);if(f){var h=f.find("a.thumbnail");h.each(function(){var a=b(this),c=a.children("img");a.mouseenter(function(){g.attr("src",c.attr("src"))})})}},window.focusTaobao||(window.focusTaobao=a),a}(window.focusTaobao||{},window.jQuery),!function(a,b){"use strict";return a.initItemPage=function(){a.initItemCarousel(),a.initShoppingCart(),a.initItemProp()},a.initItemProp=function(){var a=b("ul#prop-list"),c=a.find("li"),d=b("span#item-quantity"),e=b("span#item-price"),f=b("img#item-img");c.each(function(){var a=b(this);a.click(function(){d.text(a.data("sku-quantity")),e.text(a.data("sku-price"));var b=a.find("img").attr("src");f.attr("src",b)})})},a.initShoppingCart=function(a,c,d,e){function f(a,c){if("number"==typeof a){var d=b("span.total-money"),e=parseFloat(d.text())?parseFloat(d.text()):0;e+=a,d.text(e)}if("number"==typeof c){var f=b("span.total-quantity"),g=parseInt(f.text())?parseInt(f.text()):0;g+=c,f.text(g)}}function g(a){for(var c=q.children("li"),d=c.length;d--;){var e=b(c[d]);if(e.data("num_iid")===a)return e}}function h(){var a=m.data(),b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return delete b["bs.button"],delete b["bs.popover"],delete b.content,delete b.html,delete b.resetText,delete b.loadingtext,b._csrf=n.val(),b}function i(a){var c=b('<li class="media"></li>');for(var d in a){var e=a[d];c.attr("data-"+d,e)}var f=b('<a class="pull-left"></a>');f.attr("href","/tpi/item/details/"+a.num_iid);var g=b('<img class="media-object img-thumbnail" style="width: 150px; height:150px"/>');g.attr("src",a.img_url),f.append(g),c.append(f);var h=parseInt(a.quantity)?a.quantity:1,i=b('<div class="media-body"></div>');return b("<h5></h5>").text(a.title).appendTo(i),b('<span class="bright-point"></span>').text(a.price).append("<span> x </span>").append('<span class="quantity bright-point">'+h+"</span>").appendTo(i),i.appendTo(c),c}var j=b.cookie("shoppingcart"),k="string"==typeof a?a:"#btn-add-to-shopping-cart",l="string"==typeof c?c:"#ipt-data-container",m=(b(document.body),b(k)),n=(b(l),b("input[name='_csrf']")),o="string"==typeof d?d:"#btn-shopping-cart",p="string"==typeof e?e:"#shortcart-list",q=(b(o),b(p)),r=m.data("num_iid"),s=m.data("price");if(j){b("div#shopping-summary").removeClass("hidden").addClass("show");try{j=j.substring(j.indexOf("{"),j.lastIndexOf("}")+1),j.replace("'",'"');var t=b.parseJSON(j),u=0,v=0;for(var w in t){var x=t[w];v+=parseInt(x.quantity),u+=parseFloat(x.price)*parseInt(x.quantity);var y=i(x);y&&q.append(y)}f(u,v)}catch(z){}}else b("div#go-shopping").removeClass("hidden").addClass("show");m.popover({html:!0,placement:"top",trigger:"manual"}),m.on("shown.bs.popover",function(){b("#close-add-result").click(function(){m.popover("hide")})}),m.click(function(){m.button("loading"),b.ajax({url:"/cus/shoppingcart/add/item/"+r,type:"POST",data:h(),beforeSend:function(){},complete:function(){m.button("reset")},success:function(a,c){if("success"===c){b("div#shopping-summary").removeClass("hidden"),b("div#go-shopping").addClass("hidden"),m.popover("show");var d=g(r);if(d){var e=d.find("span.quantity"),j=parseInt(e.text());e.text(j+1),f(parseFloat(s),1)}else d=i(h()),d&&q.append(d)}},error:function(){}})})},a.initItemCarousel=function(a,c){var d="string"==typeof a?a:"#item-carousel",e="string"==typeof c?c:"#item-img",f=(b(document.body),b(d)),g=b(e);if(f){var h=f.find("a.thumbnail");h.each(function(){var a=b(this),c=a.children("img");a.mouseenter(function(){g.attr("src",c.attr("src"))})})}},window.focusTaobao||(window.focusTaobao=a),a}(window.focusTaobao||{},window.jQuery);
//# sourceMappingURL=itemloader.min.map